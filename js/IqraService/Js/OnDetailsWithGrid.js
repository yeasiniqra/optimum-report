var Controller=new function(){function s(){t&&t.Hide()}function e(n){for(var t in i)n[t]&&(i[t]=n[t]||"")}function o(i){i.UpdatedAt&&(i.UpdatedAt=i.UpdatedAt.getDate().format("dd/MM/yyyy hh:mm"));i.CreatedAt&&(i.CreatedAt=i.CreatedAt.getDate().format("dd/MM/yyyy hh:mm"));e(i);console.log([n]);n.DetailsUrl&&(t.Wait("Please wait while loading Doctor details......."),Global.CallServer(n.DetailsUrl,function(r){var u,f;if(t.Free(),r.IsError)Global.Error.Show(r,n.DetailsUrl);else{if(!r.Data){r.Id=-1;Global.Error.Show(r,n.DetailsUrl);return}for(u in r.Data)u=="UpdatedAt"||u=="CreatedAt"?(f=r.Data[u].UpdatedAt.getDate(),f&&(i[u]=f.getDate().format("dd/MM/yyyy hh:mm"))):i[u]=r.Data[u]||"";e(i)}},function(t){t.Id=-8;Global.Error.Show(t,n.DetailsUrl)},{},"POST"))}function h(){n.DetailsTMPL&&t.View.find("#details_container").html(n.DetailsTMPL);f=Global.Form.Bind(i,t.View);i.GridHeader=n.GridHeader;n.OnViewCompleted&&n.OnViewCompleted(t,i,f,gridModel,filter)}var u={},t,n,r=[],f,i={};this.Show=function(i){n=i;t?(t.Show(),o(i.model),r.each(function(){var n=[],t=this;(this.Grid.page.filter||[]).each(function(){t.Model.FilterModel[this.field]&&n.push(this)});this.Grid.page.filter=n;this.Grid.Reload()})):Global.LoadTemplate("/Templates/OnDetailsWithGrid.html",function(n){t=Global.Window.Bind(n,{width:"90%"});t.View.find(".btn_cancel").click(s);h();t.Show();o(i.model);u.Grid.Bind()},noop)},function(){function i(n){this.IsDeleted&&(n.css({color:"red"}).find(".glyphicon-trash").css({opacity:.3,cursor:"default"}),n.find("a").css({color:"red"}));this.Updator&&n.find(".updator").append("<\/br><small><small>"+this.UpdatedAt.getDate().format("dd/MM/yyyy hh:mm")+"<\/small><\/small>");this.Creator&&n.find(".creator").append("<\/br><small><small>"+this.CreatedAt.getDate().format("dd/MM/yyyy hh:mm")+"<\/small><\/small>")}function u(n,t){n.FilterModel={};(t.page.filter||[]).each(function(){n.FilterModel[this.field]=!0})}function f(n){page=n.page||{PageNumber:1,PageSize:10,showingInfo:" {0}-{1} of {2} Items ",filter:n.filter};var t={elm:n.View.find(".itrm_grid"),columns:typeof n.Columns=="function"?n.Columns():n.Columns,url:n.Url,page:page,dataBinding:n.onDataBinding,rowBound:n.rowBound||i,onComplete:function(t){r.push({Grid:t,Model:n});n.onComplete&&n.onComplete(t)},Printable:n.Printable||{Container:function(){return n.View.find(".button_container")}}};return u(n,t),t}function e(n){n.View=$(n.Template||'<div><div class="empty_style button_container row" style="margin-top: 30px;"><div style="float: left; font-size: 2em;"> '+n.Header+' <\/div><\/div><div class ="itrm_grid"><\/div><\/div>');t.View.find("#grid_container").append(n.View)}this.Bind=function(){n.Grid=n.Grid||[];n.Grid.each(function(){typeof this=="function"?this(t,function(n){r.push(n)}):(e(this),Global.Grid.Bind(f(this)))})}}.call(u.Grid={})}